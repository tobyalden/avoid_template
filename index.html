<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8">

	<title>haxepunk_template</title>

	<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="apple-mobile-web-app-capable" content="yes">


	<link rel="shortcut icon" type="image/png" href="./favicon.png">

	<script type="text/javascript" src="./Main.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>

	<script>
		window.addEventListener ("touchmove", function (event) { event.preventDefault (); }, { capture: false, passive: false });
		if (typeof window.devicePixelRatio != 'undefined' && window.devicePixelRatio > 2) {
			var meta = document.getElementById ("viewport");
			meta.setAttribute ('content', 'width=device-width, initial-scale=' + (2 / window.devicePixelRatio) + ', user-scalable=no');
		}
	</script>

	<style>
		html,body { margin: 0; padding: 0; height: 100%; overflow: hidden; }
		#openfl-content { background: #000000; width: 100%; height: 100%; }
		@font-face {
			font-family: 'Monofonto-Regular';
			src: url('font/monofonto.eot?#iefix') format('embedded-opentype'),
			url('font/monofonto.woff') format('woff'),
			url('font/monofonto.ttf') format('truetype'),
			url('font/monofonto.svg#Monofonto-Regular') format('svg');
			font-weight: normal;
			font-style: normal;
		}

	</style>

</head>
<body>

	<noscript>This webpage makes extensive use of JavaScript. Please enable JavaScript in your web browser to view this page.</noscript>

	<div id="openfl-content"></div>

	<script type="text/javascript">
        window.addEventListener("keydown", function(e) {
            // space and arrow keys
            if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
                e.preventDefault();
            }
        }, false);

        HTMLCanvasElement.prototype.getContext = function(origFn) { return function(type, attribs) { attribs = attribs || {}; attribs.preserveDrawingBuffer = true; return origFn.call(this, type, attribs); }; }(HTMLCanvasElement.prototype.getContext);

        function getScreenShot() {
            let c = document.getElementsByTagName('canvas')[0];
            html2canvas(c).then((canvas)=>{
              var t = canvas.toDataURL().replace("data:image/png;base64,", "");
              this.downloadBase64File('image/png',t,'image');
            });
          }

        function downloadBase64File(contentType, base64Data, fileName) {
          const linkSource = `data:${contentType};base64,${base64Data}`;
          const downloadLink = document.createElement("a");
          downloadLink.href = linkSource;
          downloadLink.download = fileName;
          downloadLink.click();
        }

        document.addEventListener('keydown', (event) => {k
          if (event.key === 'p') {
            // Perform your desired action here
            setTimeout(getScreenShot, 1/60*1000*5);
          }
        });

		lime.embed ("Main", "openfl-content", 540, 540, { parameters: {} });
	</script>

</body>
</html>
